import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as p,c,a as n,b as s,e as l,f as a}from"./app-3bec446e.js";const i={},u=a('<h1 id="deploying-to-aws-s3-vue3-quasar-pnpm" tabindex="-1"><a class="header-anchor" href="#deploying-to-aws-s3-vue3-quasar-pnpm" aria-hidden="true">#</a> Deploying to AWS S3 (Vue3 + Quasar + pnpm)</h1><p>We will proceed with the deployment to AWS (Amazon Web Services) Simple Storage Service (S3), a highly scalable and economical cloud storage service.</p><p>By building your projects on AWS S3, you can take advantage of the scalability, reliability, and cost-effectiveness of the AWS Cloud.</p><p>AWS S3 also makes it easy to serve static websites, simplifying the deployment process and reducing infrastructure complexity.</p><p>If you don&#39;t have an AWS account, please create one.<br> We will be using github actions, so please upload your project to the github repository.</p><ol><li><p>Log in to your <a href="https://ap-northeast-2.console.aws.amazon.com/console/home">AWS</a> account.</p></li><li><p>Go to the S3 Dashboard and click the Create Bucket button.</p></li><li><p>Enter the bucket name and <code>AWS Region</code> as <code>Asia Pacific (Seoul) ap-northeast-2</code>.</p></li></ol>',6),r={class:"hint-container tip"},d=n("p",{class:"hint-container-title"},"Tips",-1),k=n("br",null,null,-1),m={href:"http://domain.com",target:"_blank",rel:"noopener noreferrer"},v=a(`<ol start="4"><li><p>For object ownership, click <code>Enable ACL</code>.</p></li><li><p>Release all public access blocks and click the Create Bucket button.</p></li><li><p>After clicking on the bucket you created, click on the properties tab.</p></li><li><p>Press the Edit button of <code>Static Website Hosting</code> at the bottom of the Properties tab to <code>Enable</code> it.</p></li><li><p>If you implemented <code>index.html</code> for the index document and an error page for the error document, you do not need to enter the corresponding page or index.html or anything else. Save your changes.</p></li><li><p>Go to the Permissions tab and click the &#39;Edit Bucket Policy&#39; button to paste the text below.</p></li></ol><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// Bucket policy to allow public access</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PublicReadGetObject&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Principal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s3:GetObject&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::{{domain}}/*&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can manually upload the project build folder, but let&#39;s do an automatic deployment using github actions.</p><p>First, get <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code> from <a href="http://us-east-1.console.aws.amazon.com/iamv2/home" target="_blank">IAM</a>. It is.</p><ol><li><p>In IAM, click Manage Access =&gt; Users =&gt; Add User button.</p></li><li><p>Enter the user name and click Next.</p></li><li><p>Change the Permissions option to Direct Policy Attachment, search for <code>AmazonS3FullAccess</code>, check it, click Next, and click the Create User button.</p></li><li><p>Click on the created user to enter and click on <code>Create Access Key</code> on the <code>Security Credentials</code> tab.</p></li><li><p>Select <code>Local Code</code> as the use case and press <code>Create Access Key</code>.</p></li><li><p>Download the <code>.csv file</code> and save the access key and <code>secret access key (secret key)</code> well.</p></li><li><p>Click the <code>Settings</code> tab in the Github repository.</p></li><li><p>Click Security =&gt; Secrets and variables =&gt; Actions and click New repository secret.</p></li><li><p>Name: <code>AWS_ACCESS_KEY_ID</code>, Secret: Enter the issued <code>Access Key</code> and create it.</p></li><li><p>Name: <code>AWS_SECRET_ACCESS_KEY</code> , Secret: Enter the issued <code>Secret Access Key (Secret Key)</code> and create it.</p></li><li><p>Click the <code>Actions</code> tab in the github repository.</p></li><li><p>Press the <code>New workflow</code> button.</p></li><li><p>Press <code>set up a workflow yourself</code>.</p></li><li><p>Name the yml file freely.</p></li><li><p>Enter the code below.</p></li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Vue Build and Deploy to S3

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> main

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Node.js
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">16</span>

      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> pnpm/action<span class="token punctuation">-</span>setup@v2
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Install pnpm
        <span class="token key atrule">id</span><span class="token punctuation">:</span> pnpm<span class="token punctuation">-</span>install
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">8</span>
          <span class="token key atrule">run_install</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span> pnpm add @quasar/cli <span class="token punctuation">-</span>g <span class="token important">&amp;&amp;</span> pnpm install

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> pnpm run build<span class="token punctuation">:</span>pwa

      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> jakejarvis/s3<span class="token punctuation">-</span>sync<span class="token punctuation">-</span>action@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">args</span><span class="token punctuation">:</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>acl public<span class="token punctuation">-</span>read <span class="token punctuation">-</span><span class="token punctuation">-</span>follow<span class="token punctuation">-</span>symlinks <span class="token punctuation">-</span><span class="token punctuation">-</span>delete
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">AWS_S3_BUCKET</span><span class="token punctuation">:</span> &lt;Bucket_Name<span class="token punctuation">&gt;</span>
          <span class="token key atrule">AWS_ACCESS_KEY_ID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_ACCESS_KEY_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">AWS_SECRET_ACCESS_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_SECRET_ACCESS_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">AWS_REGION</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span><span class="token number">2</span>
          <span class="token key atrule">SOURCE_DIR</span><span class="token punctuation">:</span> <span class="token string">&quot;dist/pwa&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Enter the name of your S3 bucket in <code>&lt;Bucket_Name&gt;</code>.</p><p>If you followed the process of the posting well, it will be automatically deployed to AWS S3.</p>`,8);function b(h,y){const e=o("ExternalLinkIcon");return p(),c("div",null,[u,n("div",r,[d,n("p",null,[s("In order to use the https domain using S3 and route53 in the future, the bucket name must be made into a domain."),k,s(" ex) "),n("a",m,[s("domain.com"),l(e)])])]),v])}const g=t(i,[["render",b],["__file","aws-s3.html.vue"]]);export{g as default};
