import U from"./EchartsDefault-8af36067.js";import{g as j,h as p,l as h,i as z,o as i,c as r,a as e,e as J,F as m,E as y,b as D,t as s,H as P,I as V,G as S}from"./app-3bec446e.js";import{_ as $}from"./plugin-vue_export-helper-c27b6911.js";import"./install-d2ff9668.js";const a=d=>(P("data-v-8e3e1572"),d=d(),V(),d),K={class:"orderbook-wrap"},G={class:"order-price-wrap"},H={class:"ask"},q={class:"per"},Q={class:"bid"},X={class:"per"},Y={class:"trade-wrap"},Z=a(()=>e("div",{class:"info"},[e("span",null,"체결가"),e("span",null,"체결량")],-1)),ee={class:"trade"},oe={class:"trade-price"},se={class:"coin-info-wrap"},te={class:"trade-amount-wrap"},le=a(()=>e("span",null," 거래량 ",-1)),ne={style:{"font-size":"10px",color:"#888"}},ae=a(()=>e("span",null," 거래대금 ",-1)),ce=a(()=>e("span",{style:{"font-size":"10px",color:"#888"}},"백만원",-1)),ie=a(()=>e("span",null,"(최근 24시간)",-1)),re={class:"highest-lowest-wrap"},pe=a(()=>e("span",null," 52주 최고",-1)),ue={class:"color-rise"},de=a(()=>e("span",null," 52주 최저",-1)),_e={class:"color-fall"},ve={class:"today-info-wrap"},he=a(()=>e("span",null,"전일종가",-1)),be=a(()=>e("span",null,"당일고가",-1)),ke={class:"color-rise"},fe={class:"color-rise"},ge=a(()=>e("span",null,"당일저가",-1)),we={class:"color-fall"},me={class:"color-fall"},ye={class:"nav-bottom"},b="KRW-BTC",Se=j({__name:"UpbitOrderbook",setup(d){const x=p(),u=p({}),k=h(()=>{var o;return(o=u.value.obu)==null?void 0:o.map(l=>({ap:l.ap,as:l.as,per:(l.ap-t.value.pcp)/(t.value.pcp/100)}))}),f=h(()=>{var o;return(o=u.value.obu)==null?void 0:o.map(l=>({bp:l.bp,bs:l.bs,per:(l.bp-t.value.pcp)/(t.value.pcp/100)}))}),t=p({}),g=p({}),_=p([]),N=p({xAxis:[{type:"value",inverse:!0,show:!1},{gridIndex:1,type:"value",inverse:!1,show:!1}],yAxis:[{type:"category",position:"right",show:!1},{gridIndex:1,type:"category",position:"left",show:!1}],grid:[{left:0,right:"68%",top:0,height:500},{left:"68%",right:0,bottom:0,height:500}],series:[{data:h(()=>k.value&&k.value.map(o=>o.as.toFixed(3))),type:"bar",barWidth:"30",showBackground:!0,backgroundStyle:{color:"#ECF3FA"},itemStyle:{color:"#CCDDF2"},label:{show:!0,position:"insideRight"}},{xAxisIndex:1,yAxisIndex:1,data:h(()=>f.value&&f.value.map(o=>o.bs.toFixed(3))),type:"bar",barWidth:"30",showBackground:!0,backgroundStyle:{color:"#F1EAEB"},itemStyle:{color:"#EAD2CF"},label:{show:!0,position:"insideLeft"}}]}),F=()=>{x.value.scrollTop=100};let v;const W=()=>{v=new WebSocket("wss://api.upbit.com/websocket/v1"),v.onopen=o=>{v.send(`${JSON.stringify([{ticket:"orderbook"},{type:"orderbook",codes:[b]},{format:"SIMPLE"}])}`)},v.onmessage=async o=>{const l=await new Response(o.data).json();u.value=l},F()},T=()=>{let o;o=new WebSocket("wss://api.upbit.com/websocket/v1"),o.onopen=l=>{o.send(`${JSON.stringify([{ticket:"ticker"},{type:"ticker",codes:[b]},{format:"SIMPLE"}])}`)},o.onmessage=async l=>{const c=await new Response(l.data).json();t.value=c}},M=()=>{let o;o=new WebSocket("wss://api.upbit.com/websocket/v1"),o.onopen=l=>{o.send(`${JSON.stringify([{ticket:"trade"},{type:"trade",codes:["KRW-BTC"]},{format:"SIMPLE"}])}`)},o.onmessage=async l=>{const c=await new Response(l.data).json();g.value=c,_.value.unshift(c),_.value.length>50&&_.value.pop()}};return z(()=>{F(),W(),T(),M()}),(o,l)=>{var c,L,I,E,B,C,O,A,R;return i(),r("div",K,[e("div",{ref_key:"scrollRef",ref:x,class:"orderbook-area"},[J(U,{"binding-options":N.value,style:{width:"100%",height:"1000px"}},null,8,["binding-options"]),e("div",G,[e("ul",H,[(i(!0),r(m,null,y((c=k.value)==null?void 0:c.reverse(),(n,w)=>(i(),r("li",{key:w,class:S([n.per>0?"color-rise":"color-fall",{box:n.ap===g.value.tp}])},[e("span",null,s(n.ap.toLocaleString()),1),e("span",q,s(n.per>0?"+":"")+s(n.per.toFixed(2))+"% ",1)],2))),128))]),e("ul",Q,[(i(!0),r(m,null,y(f.value,(n,w)=>(i(),r("li",{key:w,class:S([n.per>0?"color-rise":"color-fall",{box:n.bp===g.value.tp}])},[e("span",null,s(n.bp.toLocaleString()),1),e("span",X,s(n.per>0?"+":"")+s(n.per.toFixed(2))+"% ",1)],2))),128))])]),e("div",Y,[Z,e("ul",ee,[(i(!0),r(m,null,y(_.value,n=>(i(),r("li",{key:n.sid},[e("span",oe,s(n.tp.toLocaleString()),1),e("span",{class:S(["trade-volume",n.ab])},s(n.tv.toFixed(3)),3)]))),128))])]),e("div",se,[e("ul",te,[e("li",null,[le,e("span",null,[D(s((L=Math.round(t.value.atv24h))==null?void 0:L.toLocaleString())+" ",1),e("span",ne,s(b.split("-")[1]),1)])]),e("li",null,[ae,e("div",null,[e("span",null,[D(s(t.value.atp24h&&Number(t.value.atp24h.toFixed().slice(0,-6)).toLocaleString())+" ",1),ce]),ie])])]),e("ul",re,[e("li",null,[pe,e("div",null,[e("span",ue,s((I=t.value.h52wp)==null?void 0:I.toLocaleString()),1),e("span",null,"("+s(t.value.h52wdt)+")",1)])]),e("li",null,[de,e("div",null,[e("span",_e,s((E=t.value.l52wp)==null?void 0:E.toLocaleString()),1),e("span",null," ("+s(t.value.l52wdt)+") ",1)])])]),e("ul",ve,[e("li",null,[he,e("span",null,s((B=t.value.pcp)==null?void 0:B.toLocaleString()),1)]),e("li",null,[be,e("div",null,[e("span",ke,s((C=t.value.hp)==null?void 0:C.toLocaleString()),1),e("em",fe," +"+s(((t.value.hp-t.value.pcp)/(t.value.pcp/100)).toFixed(2))+"% ",1)])]),e("li",null,[ge,e("div",null,[e("span",we,s((O=t.value.lp)==null?void 0:O.toLocaleString()),1),e("em",me,s(((t.value.lp-t.value.pcp)/(t.value.pcp/100)).toFixed(2))+"% ",1)])])])])],512),e("nav",ye,[e("span",null,s((A=u.value.tas)==null?void 0:A.toFixed(3)),1),e("button",{type:"button"},"수량("+s(b)+")"),e("span",null,s((R=u.value.tbs)==null?void 0:R.toFixed(3)),1)])])}}});const Ee=$(Se,[["__scopeId","data-v-8e3e1572"],["__file","UpbitOrderbook.vue"]]);export{Ee as default};
