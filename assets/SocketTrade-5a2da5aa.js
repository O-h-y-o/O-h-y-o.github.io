import{a as f}from"./axios-4a70c6fc.js";import{a as v,d as g}from"./rule-b4386e74.js";import{d as p}from"./dayjs.min-1cecb027.js";import{g as k,h,i as S,o as n,c,a as s,F as _,E as u,z as i,t as a,G as y}from"./app-d4884e8f.js";import{_ as T}from"./plugin-vue_export-helper-c27b6911.js";import"./commonjsHelpers-042e6b4d.js";const b={class:"trade-wrap"},w={class:"trade-title"},C={class:"trade-info-wrap"},x={class:"time-zone"},B={class:"trade-price"},K="KRW-BTC",L=k({__name:"SocketTrade",setup(M){const r=h([]),l=async()=>{const o=(await f.get(`https://api.upbit.com/v1/trades/ticks?market=${K}&count=20`)).data,e=v(o);r.value.push(...e)},d=g(t=>{Math.floor(t.target.scrollTop/(t.target.scrollHeight-t.target.clientHeight)*100)>90&&l()},100);return S(()=>{l();let t;t=new WebSocket("wss://api.upbit.com/websocket/v1"),t.onopen=o=>{t.send(`${JSON.stringify([{ticket:"trade"},{type:"trade",codes:["KRW-BTC"]},{format:"SIMPLE"}])}`)},t.onmessage=async o=>{const e=await new Response(o.data).json();r.value.unshift(e),r.value.length>50&&r.value.pop()}}),(t,o)=>(n(),c("div",b,[s("ul",w,[(n(),c(_,null,u(["체결시간(UTC)","체결가격(KRW)","체결량(BTC)","체결금액(KRW)"],e=>s("li",{key:e},a(e),1)),64))]),s("div",{class:"trade-area",onScroll:o[0]||(o[0]=(...e)=>i(d)&&i(d)(...e))},[s("ul",C,[(n(!0),c(_,null,u(r.value,(e,m)=>(n(),c("li",{key:m,class:"trade-info"},[s("div",x,[s("span",null,a(i(p)(e.tms).format("MM.DD")),1),s("span",null,a(i(p)(e.tms).format("HH:mm")),1)]),s("div",B,a(e.tp.toLocaleString()),1),s("div",{class:y(e.ab)},a(e.tv),3),s("div",null,a(Number((e.tp*e.tv).toFixed()).toLocaleString()),1)]))),128))])],32)]))}});const F=T(L,[["__scopeId","data-v-6cb4ad4d"],["__file","SocketTrade.vue"]]);export{F as default};
