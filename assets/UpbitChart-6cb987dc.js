import{a as h}from"./axios-4a70c6fc.js";import{d as x}from"./dayjs.min-1cecb027.js";import y from"./EchartsDefault-65b11a52.js";import{c as t}from"./rule-b4386e74.js";import{g as b,h as p,j as g,o as v,D as _}from"./app-f4669e15.js";import{_ as w}from"./plugin-vue_export-helper-c27b6911.js";import"./commonjsHelpers-042e6b4d.js";import"./install-d2ff9668.js";const S=b({__name:"UpbitChart",setup(k){const s=p({animationDuration:100,animationDurationUpdate:100,title:{text:"비트코인",subtext:"KRW-BTC",left:"center",top:40,textStyle:{fontSize:25}},tooltip:{trigger:"axis"},xAxis:[{type:"category",data:[""],boundaryGap:!0,axisLabel:{show:!1},axisPointer:{show:!0},axisLine:{show:!1},axisTick:{show:!1}},{type:"category",gridIndex:1,data:[],boundaryGap:!0,axisLine:{lineStyle:{color:"#777"}},axisPointer:{type:"shadow",triggerTooltip:!0},nameLocation:"middle",nameTextStyle:{fontStyle:"italic",lineHeight:40}}],yAxis:[{scale:!0,splitNumber:2,axisLine:{lineStyle:{color:"#777"}},axisTick:{show:!1},axisLabel:{inside:!1,formatter:`{value}
`},position:"right",splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{inside:!1,formatter:`{value}
`,fontSize:10},axisTick:{show:!1},splitLine:{show:!0},position:"right",nameTextStyle:{fontSize:5},splitArea:{show:!0}}],grid:[{left:20,right:80,top:110,height:200},{left:20,right:80,height:80,top:340}],dataZoom:[{show:!0,type:"inside",filterMode:"filter",xAxisIndex:[0,1]}],series:[{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],itemStyle:{color:e=>e.data[2]===0?t.same:e.data[2]===1?t.up:t.down},barWidth:"70%",colorBy:"data"},{type:"candlestick",data:[],itemStyle:{color:t.down,color0:t.up,borderColor:t.down,borderColor0:t.up,borderColorDoji:t.same},barWidth:"70%",markLine:{symbol:"none",data:[{yAxis:0,label:{color:"white",fontSize:8,lineHeight:14,padding:[0,4],borderRadius:4,formatter:({value:e})=>e.toLocaleString()},lineStyle:{type:[.5],dashOffset:.5}}]}}]}),r=p({}),n=p({}),m=(e,i,a)=>{e.data[0].yAxis=i[0],e.data[0].lineStyle.color=a(i),e.data[0].label.backgroundColor=a(i)},f=async(e=50)=>{const i=await h.get(`https://api.upbit.com/v1/candles/minutes/1?market=KRW-BTC&count=${e}`);for(const a in i.data.reverse()){const o=i.data[a],l=x(o.candle_date_time_kst).format("HH:mm"),d=o.trade_price,c=o.opening_price;r.value[l]=[d,c,o.low_price,o.high_price];const u=Object.keys(n.value);n.value[l]=[u.indexOf(l)===-1?Object.keys(n.value).length:u.indexOf(l),Math.round(o.candle_acc_trade_volume*1e3)/1e3,d===c?0:d>c?1:2]}s.value.xAxis.forEach(a=>{a.data=Object.keys(r.value)}),s.value.series[0].data=Object.values(n.value),s.value.series[1].data=Object.values(r.value),m(s.value.series[1].markLine,Object.values(r.value)[Object.values(r.value).length-1],([a,o])=>a===o?t.same:a>o?t.up:t.down)};return g(()=>{f()}),(e,i)=>(v(),_(y,{style:{width:"100%",height:"500px"},"binding-options":s.value},null,8,["binding-options"]))}}),I=w(S,[["__file","UpbitChart.vue"]]);export{I as default};
