import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o,c as l,a as n,b as s,e as c,f as a}from"./app-3bec446e.js";const i={},u=a('<h1 id="aws-s3-배포하기-vue3-quasar-pnpm" tabindex="-1"><a class="header-anchor" href="#aws-s3-배포하기-vue3-quasar-pnpm" aria-hidden="true">#</a> AWS S3 배포하기 (Vue3 + Quasar + pnpm)</h1><p>확장성이 뛰어나고 경제적인 클라우드 스토리지 서비스인 AWS(Amazon Web Services) Simple Storage Service(S3) 로 배포를 진행하겠습니다.</p><p>프로젝트를 AWS S3에 구축하면 AWS 클라우드의 확장성, 안정성 및 비용 효율성을 활용할 수 있습니다.</p><p>또한 AWS S3는 정적 웹 사이트를 쉽게 제공하여 배포 프로세스를 단순화하고 인프라의 복잡성을 줄일 수 있습니다.</p><p>AWS 계정이 없다면 만들어주세요.<br> github actions를 이용할 것이니 github repository에 프로젝트를 올려주세요.</p><ol><li><p><a href="https://ap-northeast-2.console.aws.amazon.com/console/home">AWS</a> 계정에 로그인 해주세요.</p></li><li><p>S3 대시보드로 이동하고 버킷 만들기 버튼을 눌러주세요.</p></li><li><p>버킷 이름을 작성해주시교 <code>AWS 리전</code> 은 <code>아시아 태평양(서울) ap-northeast-2</code> 로 해주세요.</p></li></ol>',6),r={class:"hint-container tip"},d=n("p",{class:"hint-container-title"},"팁",-1),k=n("br",null,null,-1),v={href:"http://domain.com",target:"_blank",rel:"noopener noreferrer"},m=a(`<ol start="4"><li><p>객체소유권은 <code>ACL 활성화</code>를 눌러주세요.</p></li><li><p>모든 퍼블릭 액세스 차단을 풀어준 뒤 버킷만들기 버튼을 눌러주세요.</p></li><li><p>만든 버킷을 눌러 들어간 뒤 속성 탭을 클릭해주세요.</p></li><li><p>속성 탭의 최하단 <code>정적 웹 사이트 호스팅</code> 의 편집 버튼을 눌러 <code>활성화</code> 해주세요.</p></li><li><p>인덱스 문서는 <code>index.html</code>, 오류 문서는 에러페이지를 구현하였다면 해당하는 페이지를 넣어주거나, index.html 혹은 아무것도 입력하지 않아도 됩니다. 변경사항을 저장해줍니다.</p></li><li><p>권한 탭으로 들어가 <code>버킷 정책</code> 편집 버튼을 눌러 하단의 텍스트를 붙여넣어주세요.</p></li></ol><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// 공개 액세스를 허용하는 버킷 정책</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PublicReadGetObject&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Principal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s3:GetObject&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::{{domain}}/*&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>프로젝트 빌드 폴더를 수동적으로 올릴 수 있지만 github actions을 이용해 자동 배포를 해보겠습니다.</p><p>먼저 <code>AWS_ACCESS_KEY_ID</code> 와 <code>AWS_SECRET_ACCESS_KEY</code> 를 <a href="http://us-east-1.console.aws.amazon.com/iamv2/home" target="_blank">IAM</a>에서 발급 받겠습니다.</p><ol><li><p>IAM 에서 액세스 관리 =&gt; 사용자 =&gt; 사용자 추가 버튼을 눌러줍니다.</p></li><li><p>사용자 이름을 입력하고 다음을 눌러줍니다.</p></li><li><p>권한 옵션을 직접 정책 연결로 바꾸고 <code>AmazonS3FullAccess</code> 를 검색한 뒤 체크해주고 다음을 눌러주고 사용자 생성 버튼을 눌러줍니다.</p></li><li><p>만들어진 사용자를 클릭하여 들어가 <code>보안 자격 증명</code> 탭에서 <code>액세스 키 만들기</code> 를 눌러줍니다.</p></li><li><p>사용 사례는 <code>로컬 코드</code> 로 선택하고 다음을 눌러 <code>액세스 키 만들기</code> 를 눌러줍니다.</p></li><li><p><code>.csv 파일 다운로드</code>를 하고 액세스 키, <code>비밀 액세스 키(시크릿 키)</code>를 잘 저장해둡니다.</p></li><li><p>Github repository 에서 <code>Settings</code> 탭을 눌러줍니다.</p></li><li><p>Security =&gt; Secrets and variables =&gt; Actions 를 눌러 New repository secret 을 눌러줍니다.</p></li><li><p>Name: <code>AWS_ACCESS_KEY_ID</code> , Secret: 발급한 <code>액세스 키</code> 를 입력하고 생성해줍니다.</p></li><li><p>Name: <code>AWS_SECRET_ACCESS_KEY</code> , Secret: 발급한 <code>비밀 액세스 키(시크릿 키)</code>를 입력하고 생성해줍니다.</p></li><li><p>github repository 에서 <code>Actions</code> 탭을 눌러줍니다.</p></li><li><p><code>New workflow</code> 버튼을 눌러줍니다.</p></li><li><p><code>set up a workflow yourself</code> 를 눌러줍니다.</p></li><li><p>yml 파일명을 자유롭게 지어줍니다.</p></li><li><p>밑의 코드를 넣어줍니다.</p></li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Vue Build and Deploy to S3

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> main

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Node.js
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">16</span>

      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> pnpm/action<span class="token punctuation">-</span>setup@v2
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Install pnpm
        <span class="token key atrule">id</span><span class="token punctuation">:</span> pnpm<span class="token punctuation">-</span>install
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">8</span>
          <span class="token key atrule">run_install</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span> pnpm add @quasar/cli <span class="token punctuation">-</span>g <span class="token important">&amp;&amp;</span> pnpm install

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> pnpm run build<span class="token punctuation">:</span>pwa

      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> jakejarvis/s3<span class="token punctuation">-</span>sync<span class="token punctuation">-</span>action@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">args</span><span class="token punctuation">:</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>acl public<span class="token punctuation">-</span>read <span class="token punctuation">-</span><span class="token punctuation">-</span>follow<span class="token punctuation">-</span>symlinks <span class="token punctuation">-</span><span class="token punctuation">-</span>delete
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">AWS_S3_BUCKET</span><span class="token punctuation">:</span> &lt;Bucket_Name<span class="token punctuation">&gt;</span>
          <span class="token key atrule">AWS_ACCESS_KEY_ID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_ACCESS_KEY_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">AWS_SECRET_ACCESS_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_SECRET_ACCESS_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">AWS_REGION</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span><span class="token number">2</span>
          <span class="token key atrule">SOURCE_DIR</span><span class="token punctuation">:</span> <span class="token string">&quot;dist/pwa&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;Bucket_Name&gt;</code> 에는 S3버킷의 이름을 넣어줍니다.</p><p>해당 포스팅의 과정을 잘 따라왔다면 AWS S3 에 자동적으로 잘 배포가 될 것입니다.</p>`,8);function b(S,_){const e=p("ExternalLinkIcon");return o(),l("div",null,[u,n("div",r,[d,n("p",null,[s("추후 S3와 route53을 이용한 https 도메인 사용을 위해서 버킷 이름은 도메인으로 만들어야합니다."),k,s(" ex) "),n("a",v,[s("domain.com"),c(e)])])]),m])}const A=t(i,[["render",b],["__file","aws-s3.html.vue"]]);export{A as default};
